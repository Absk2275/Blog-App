{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RestartProcess = void 0;\n\nconst Rx = __importStar(require(\"rxjs\"));\n\nconst operators_1 = require(\"rxjs/operators\");\n\nconst defaults = __importStar(require(\"../defaults\"));\n/**\n * Restarts commands that fail up to a defined number of times.\n */\n\n\nclass RestartProcess {\n  constructor(_ref) {\n    let {\n      delay,\n      tries,\n      logger,\n      scheduler\n    } = _ref;\n    this.logger = logger;\n    this.delay = delay != null ? +delay : defaults.restartDelay;\n    this.tries = tries != null ? +tries : defaults.restartTries;\n    this.tries = this.tries < 0 ? Infinity : this.tries;\n    this.scheduler = scheduler;\n  }\n\n  handle(commands) {\n    if (this.tries === 0) {\n      return {\n        commands\n      };\n    }\n\n    commands.map(command => command.close.pipe((0, operators_1.take)(this.tries), (0, operators_1.takeWhile)(_ref2 => {\n      let {\n        exitCode\n      } = _ref2;\n      return exitCode !== 0;\n    }))).map((failure, index) => Rx.merge( // Delay the emission (so that the restarts happen on time),\n    // explicitly telling the subscriber that a restart is needed\n    failure.pipe((0, operators_1.delay)(this.delay, this.scheduler), (0, operators_1.mapTo)(true)), // Skip the first N emissions (as these would be duplicates of the above),\n    // meaning it will be empty because of success, or failed all N times,\n    // and no more restarts should be attempted.\n    failure.pipe((0, operators_1.skip)(this.tries), (0, operators_1.mapTo)(false), (0, operators_1.defaultIfEmpty)(false))).subscribe(restart => {\n      const command = commands[index];\n\n      if (restart) {\n        this.logger.logCommandEvent(`${command.command} restarted`, command);\n        command.start();\n      }\n    }));\n    return {\n      commands: commands.map(command => {\n        const closeStream = command.close.pipe((0, operators_1.filter)((_ref3, emission) => {\n          let {\n            exitCode\n          } = _ref3;\n          // We let all success codes pass, and failures only after restarting won't happen again\n          return exitCode === 0 || emission >= this.tries;\n        }));\n        return new Proxy(command, {\n          get(target, prop) {\n            return prop === 'close' ? closeStream : target[prop];\n          }\n\n        });\n      })\n    };\n  }\n\n}\n\nexports.RestartProcess = RestartProcess;\n;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","exports","RestartProcess","Rx","require","operators_1","defaults","constructor","delay","tries","logger","scheduler","restartDelay","restartTries","Infinity","handle","commands","map","command","close","pipe","take","takeWhile","exitCode","failure","index","merge","mapTo","skip","defaultIfEmpty","subscribe","restart","logCommandEvent","start","closeStream","filter","emission","Proxy","target","prop"],"sources":["C:/Users/Abhishek/Desktop/Complaint-Management/node_modules/concurrently/dist/src/flow-control/restart-process.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RestartProcess = void 0;\nconst Rx = __importStar(require(\"rxjs\"));\nconst operators_1 = require(\"rxjs/operators\");\nconst defaults = __importStar(require(\"../defaults\"));\n/**\n * Restarts commands that fail up to a defined number of times.\n */\nclass RestartProcess {\n    constructor({ delay, tries, logger, scheduler }) {\n        this.logger = logger;\n        this.delay = delay != null ? +delay : defaults.restartDelay;\n        this.tries = tries != null ? +tries : defaults.restartTries;\n        this.tries = this.tries < 0 ? Infinity : this.tries;\n        this.scheduler = scheduler;\n    }\n    handle(commands) {\n        if (this.tries === 0) {\n            return { commands };\n        }\n        commands.map(command => command.close.pipe((0, operators_1.take)(this.tries), (0, operators_1.takeWhile)(({ exitCode }) => exitCode !== 0))).map((failure, index) => Rx.merge(\n        // Delay the emission (so that the restarts happen on time),\n        // explicitly telling the subscriber that a restart is needed\n        failure.pipe((0, operators_1.delay)(this.delay, this.scheduler), (0, operators_1.mapTo)(true)), \n        // Skip the first N emissions (as these would be duplicates of the above),\n        // meaning it will be empty because of success, or failed all N times,\n        // and no more restarts should be attempted.\n        failure.pipe((0, operators_1.skip)(this.tries), (0, operators_1.mapTo)(false), (0, operators_1.defaultIfEmpty)(false))).subscribe(restart => {\n            const command = commands[index];\n            if (restart) {\n                this.logger.logCommandEvent(`${command.command} restarted`, command);\n                command.start();\n            }\n        }));\n        return {\n            commands: commands.map(command => {\n                const closeStream = command.close.pipe((0, operators_1.filter)(({ exitCode }, emission) => {\n                    // We let all success codes pass, and failures only after restarting won't happen again\n                    return exitCode === 0 || emission >= this.tries;\n                }));\n                return new Proxy(command, {\n                    get(target, prop) {\n                        return prop === 'close' ? closeStream : target[prop];\n                    },\n                });\n            }),\n        };\n    }\n}\nexports.RestartProcess = RestartProcess;\n;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}